<% if current_user && current_user.votes.where(:post_id => post.id, :vote => true).present? %>
  <p>*
<% else %>
  <%= link_to raw("<i class=\"icon-caret-up\"></i>"),
              votes_path(:vote => { :post_id => post.id,
                                    :vote => 1 }),
                                    :method => :post %>
<% end %>
<% if current_user && current_user.votes.where(:post_id => post.id, :vote => false).present? %>
  *
<% else %>
  <%= link_to raw("<i class=\"icon-caret-down\"></i>"),
              votes_path(:vote => { :post_id => post.id,
                                    :vote => 0 }),
                                    :method => :post %>
<% end %>

<div class="post-container">
  <div class="post-title"><%= link_to post.title, post.url %></div>

  <div class="post-metadata">
    <p>
      <%= post.score %> points by <%= post.user.username %> <%= time_ago_in_words(post.created_at) %> ago | <% if post.comments.count == 0 %>
              <%= link_to 'discuss', post %>
            <% else %>
              <%= link_to "#{post.comments.count} comments", post %>
            <% end %>
      <%= " (upvotes: #{post.upvotes} |
                        downvotes: #{post.downvotes} |
                        hotness: #{post.hotness})" if Rails.env.development? %></span>
    </p>
  </div>
</div>
